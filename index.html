<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="description"
        content="Deformable Neural Radiance Fields creates free-viewpoint portraits (nerfies) from casually captured videos.">
  <meta name="keywords" content="Nerfies, D-NeRF, NeRF">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Nerfies: Deformable Neural Radiance Fields</title>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-PYVRSFMDRL"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }

    gtag('js', new Date());

    gtag('config', 'G-PYVRSFMDRL');
  </script>

  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro"
        rel="stylesheet">

  <link rel="stylesheet" href="./static/css/bulma.min.css">
  <link rel="stylesheet" href="./static/css/bulma-carousel.min.css">
  <link rel="stylesheet" href="./static/css/bulma-slider.min.css">
  <link rel="stylesheet" href="./static/css/fontawesome.all.min.css">
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="./static/css/index.css">
  <link rel="icon" href="./static/images/favicon.svg">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script defer src="./static/js/fontawesome.all.min.js"></script>
  <script src="./static/js/bulma-carousel.min.js"></script>
  <script src="./static/js/bulma-slider.min.js"></script>
  <script src="./static/js/index.js"></script>
</head>
<body>

<section class="hero">
  <div class="hero-body">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column has-text-centered">
          <h1 class="title is-1 publication-title">An Artist's Template: Infusing Template Trajectory for Zero-shot Style Transfer</h1>
         <div class="is-size-5 publication-authors">
          <span class="author-block">Anonymous Authors</span>
        </div>

        <div class="is-size-5 publication-authors">
          <span class="author-block">Affiliations withheld for double-blind review</span>
        </div>

          <div class="column has-text-centered">
            <div class="publication-links">
              <!-- PDF Link. -->
              <span class="link-block">
                <a href="https://arxiv.org/pdf/2011.12948"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="fas fa-file-pdf"></i>
                  </span>
                  <span>Paper</span>
                </a>
              </span>
              <span class="link-block">
                <a href="https://arxiv.org/abs/2011.12948"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="ai ai-arxiv"></i>
                  </span>
                  <span>arXiv</span>
                </a>
              </span>
              <!-- Video Link. -->
              <span class="link-block">
                <a href="https://www.youtube.com/watch?v=MrKrnHhk8IA"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="fab fa-youtube"></i>
                  </span>
                  <span>Video</span>
                </a>
              </span>
              <!-- Code Link. -->
              <span class="link-block">
                <a href="https://github.com/google/nerfies"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="fab fa-github"></i>
                  </span>
                  <span>Code</span>
                  </a>
              </span>
              <!-- Dataset Link. -->
              <span class="link-block">
                <a href="https://github.com/google/nerfies/releases/tag/0.1"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="far fa-images"></i>
                  </span>
                  <span>Data</span>
                  </a>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</section>


<section class="hero is-light is-small">
  <div class="hero-body">
    <div class="container">
      <div id="results-carousel" class="carousel results-carousel">
        <div class="item item-steve">
          <video poster="" id="steve" autoplay controls muted loop playsinline height="100%">
            <source src="static/videos/coffee.mp4" type="video/mp4">
          </video>
        </div>
        <div class="item item-chair-tp">
          <video poster="" id="chair-tp" autoplay controls muted loop playsinline height="100%">
            <source src="./static/videos/boat_4_waterflow.mp4"
                    type="video/mp4">
          </video>
        </div>
        <div class="item item-shiba">
          <video poster="" id="shiba" autoplay controls muted loop playsinline height="100%">
            <source src="static/videos/book.mp4"
                    type="video/mp4">
          </video>
        </div>
        <div class="item item-fullbody">
          <video poster="" id="fullbody" autoplay controls muted loop playsinline height="100%">
            <source src="static/videos/book.mp4"
                    type="video/mp4">
          </video>
        </div>
        <div class="item item-blueshirt">
          <video poster="" id="blueshirt" autoplay controls muted loop playsinline height="100%">
            <source src="static/videos/book.mp4"
                    type="video/mp4">
          </video>
        </div>
        <div class="item item-mask">
          <video poster="" id="mask" autoplay controls muted loop playsinline height="100%">
            <source src="static/videos/book.mp4"
                    type="video/mp4">
          </video>
        </div>
        <div class="item item-coffee">
          <video poster="" id="coffee" autoplay controls muted loop playsinline height="100%">
            <source src="static/videos/book.mp4"
                    type="video/mp4">
          </video>
        </div>
        <div class="item item-toby">
          <video poster="" id="toby" autoplay controls muted loop playsinline height="100%">
            <source src="static/videos/book.mp4" type="video/mp4">
          </video>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- End Glider -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    new Glide('#teaser-glide', {
      type: 'carousel',
      perView: 1,
      autoplay: 4000,  // Optional: auto slide every 4 seconds
      hoverpause: true,
      animationDuration: 800,
      animationTimingFunc: 'ease-in-out',
    }).mount();
  });
</script>
<!--  -->

<!-- Abstract -->
<section class="section">
  <div class="container is-max-desktop">
    <!-- Abstract. -->
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">Abstract</h2>
        <div class="content has-text-justified">
          <p>
            Diffusion models are capable of delivering many zero-shot applications in addition to stunning image generation,
            and style transfer is a popular choice among those applications. In contrast to classical style transfer studies,
            recent methods harness diffusion models, where decoupling between the source image and content image returns the 
            stylized image after denoising steps. To further upscale the stylization performance, researchers integrate 
            prompt guidance, adapters, or ControlNet within their style transfer pipeline. However, the style of an image is
            always subjective, and it is common for zero-shot diffusion stylization approaches to deliver undesired performances. 
          </p>
          <p>
            For instance, the tradeoff between style injection and content preservation often poses a great challenge, and the resultant
            stylized image deviates far away from the content image. We address both issues by integrating two efficient contributions: 
            a) preserving content via dividing and aggregating the self-attention and b) maintaining the impact of style through modulating
            the attention components. Our approach can provide aesthetically appealing yet content-preserving style transfer performance 
            through the combined effort of these contributions. Through extensive experimental studies, we validated our approach's qualitative
            and quantitative performance, and our approach shows a higher benchmark than the concurrent studies.
          </p>
        </div>
      </div>
    </div>
    <!--/ Abstract. -->


<!-- Method -->
<section class="section">
    <div class="container is-max-desktop">

      <div class="columns is-centered">

      </div>
      <!--/ Avatar Creation. -->
      <div class="columns is-centered">
        <div class="column is-full-width">
          <h2 class="title is-3">Method overview</h2>
          <!-- Figure here -->
          <div class="columns is-vcentered interpolation-panel">
            <img class="links-cover" src="static/main_framework.png" alt="Method Overview", width="100%">
          </div>
          <!-- Text below the figure -->
          <h4 class="subtitle has-text-justified"> <span class="dnerf">STAM's</span> style transfer approach. On the rightmost part of the diagram, we display three sub-blocks, 
          where we briefly display the underlying mechanics of the proposed aggregated attention, attention swapping, and modulation of the attention components. 
          Note that we do not show the full details of the attention modulation here for brevity,
          and we denote Q<sub>s</sub> as Q<sub>s</sub><sup>*</sup> to indicate the completion of the appropriate transformation.</h4>
          <br />
        </div>
      </div>
  </section>

<!-- Method end -->

<!-- Additional Performances -->

<section class="section">
    <div class="container is-max-desktop">

      <div class="columns is-centered">

      </div>

      <!-- Articulation. -->
      <div class="columns is-centered">
        <div class="column is-full-width">
          <h2 class="title is-3">More Text-driven Results</h2>
          <div class="gallery is-centered">
            <!-- Repeat this block for each image pair in the 4x6 grid -->
            <div class="gallery-item" data-front="static/images/busy_town.png"
              data-back="static/images/town_comic_pix (1).png">
              <div class="flip-card">
                <div class="flip-card-inner flip-card-front"
                  style="background-image: url('static/images/busy_town.png');">
                </div>
                <div class="flip-card-inner flip-card-back" style="background-image: url('static/images/town_comic_pix (1).png');">
                </div>

              </div>
              <div class="text-box">American comic, western style, detailed.</div>
            </div>


            <div class="gallery-item" data-front="static/images/hurricane.png"
              data-back="static/images/add_text/STAM_tera.png">
              <div class="flip-card">
                <div class="flip-card-inner flip-card-front"
                  style="background-image: url('static/images/hurricane.png');">
                </div>
                <div class="flip-card-inner flip-card-back" style="background-image: url('static/images/STAM_tera.png');">
                </div>

              </div>
              <div class="text-box">Terracotta art style.</div>
            </div>


            <div class="gallery-item" data-front="static/images/horse_input.png"
              data-back="static/images/gallery/horse_ours.png">
              <div class="flip-card">
                <div class="flip-card-inner flip-card-front"
                  style="background-image: url('static/images/horse_input.png');">
                </div>
                <div class="flip-card-inner flip-card-back" style="background-image: url('static/images/horse_ours.png');">
                </div>

              </div>
              <div class="text-box">American comic, western style, detailed.</div>
            </div>




            <div class="gallery-item" data-front="static/images/9.png"
              data-back="static/images/rococo.png">
              <div class="flip-card">
                <div class="flip-card-inner flip-card-front"
                  style="background-image: url('static/images/9.png');">
                </div>
                <div class="flip-card-inner flip-card-back" style="background-image: url('static/images/loading.png');">
                </div>

              </div>
              <div class="text-box">Rococo painting.</div>
            </div>


            <div class="gallery-item" data-front="static/images/39.png"
              data-back="static/images/renaissance.png">
              <div class="flip-card">
                <div class="flip-card-inner flip-card-front"
                  style="background-image: url('static/images/39.png');">
                </div>
                <div class="flip-card-inner flip-card-back" style="background-image: url('static/images/loading.png');">
                </div>

              </div>
              <div class="text-box">A Renaissance painting, detailed, traditional.</div>
            </div>


            <div class="gallery-item" data-front="static/images/12.png"
              data-back="static/images/cubism_1.png">
              <div class="flip-card">
                <div class="flip-card-inner flip-card-front"
                  style="background-image: url('static/images/12.png');">
                </div>
                <div class="flip-card-inner flip-card-back" style="background-image: url('static/images/loading.png');">
                </div>

              </div>
              <div class="text-box">An abstract cubism painting, geometric shapes.</div>
            </div>


            <div class="gallery-item" data-front="static/images/62.png"
              data-back="static/images/inkwash_1.png">
              <div class="flip-card">
                <div class="flip-card-inner flip-card-front"
                  style="background-image: url('static/images/62.png');">
                </div>
                <div class="flip-card-inner flip-card-back" style="background-image: url('static/images/loading.png');">
                </div>

              </div>
              <div class="text-box">A ink-wash watercolor painting.</div>
            </div>

            <div class="gallery-item" data-front="static/images/vase_input.png"
              data-back="static/images/vase_ours.png">
              <div class="flip-card">
                <div class="flip-card-inner flip-card-front"
                  style="background-image: url('static/images/vase_input.png');">
                </div>
                <div class="flip-card-inner flip-card-back" style="background-image: url('static/images/vase_ours.png');">
                </div>

              </div>
              <div class="text-box">A fauvist painting, vivid colors.</div>
            </div>

            <div class="gallery-item" data-front="static/images/chn.jpg"
              data-back="static/images/chn_sketch.png">
              <div class="flip-card">
                <div class="flip-card-inner flip-card-front"
                  style="background-image: url('static/images/chn.jpg');">
                </div>
                <div class="flip-card-inner flip-card-back" style="background-image: url('static/images/loading.png');">
                </div>

              </div>
              <div class="text-box">Pencil-sketch, detailed cross-hatching.</div>
            </div>


            <div class="gallery-item" data-front="static/images/76.png"
              data-back="static/images/impressionism.png">
              <div class="flip-card">
                <div class="flip-card-inner flip-card-front"
                  style="background-image: url('static/images/76.png');">
                </div>
                <div class="flip-card-inner flip-card-back" style="background-image: url('static/images/loading.png');">
                </div>

              </div>
              <div class="text-box">An impressionism painting, claude monet, vibrant color</div>
            </div>

            <div class="gallery-item" data-front="static/images/79.png"
              data-back="static/images/traditional_watercolor.png">
              <div class="flip-card">
                <div class="flip-card-inner flip-card-front"
                  style="background-image: url('static/images/79.png');">
                </div>
                <div class="flip-card-inner flip-card-back" style="background-image: url('static/images/loading.png');">
                </div>

              </div>
              <div class="text-box">A traditional watercolor painting, colorful</div>

            </div>

            <div class="gallery-item" data-front="static/images/29.png"
              data-back="static/images/neoexpressionism.png">
              <div class="flip-card">
                <div class="flip-card-inner flip-card-front"
                  style="background-image: url('static/images/29.png');">
                </div>
                <div class="flip-card-inner flip-card-back" style="background-image: url('static/images/loading.png');">
                </div>

              </div>
              <div class="text-box">A neo-expressionism painting, detailed brush strokes</div>
            </div>

            <div class="gallery-item" data-front="static/images/59.png"
              data-back="static/images/pixel_art.png">
              <div class="flip-card">
                <div class="flip-card-inner flip-card-front"
                  style="background-image: url('static/images/59.png');">
                </div>
                <div class="flip-card-inner flip-card-back" style="background-image: url('static/images/loading.png');">
                </div>

              </div>
              <div class="text-box">A pixel art painting, detailed, 8-bit</div>

            </div>

            <div class="gallery-item" data-front="static/images/1.png"
              data-back="static/images/fauvist_1.png">
              <div class="flip-card">
                <div class="flip-card-inner flip-card-front"
                  style="background-image: url('static/images/1.png');">
                </div>
                <div class="flip-card-inner flip-card-back" style="background-image: url('static/images/loading.png');">
                </div>

              </div>
              <div class="text-box">A fauvist painting, vivid colors</div>

            </div>

            <div class="gallery-item" data-front="static/images/41.png"
              data-back="static/images/cubist.png">
              <div class="flip-card">
                <div class="flip-card-inner flip-card-front"
                  style="background-image: url('static/images/41.png');">
                </div>
                <div class="flip-card-inner flip-card-back" style="background-image: url('static/images/loading.png');">
                </div>

              </div>
              <div class="text-box">An abstract cubist painting, geometric shapes</div>

            </div>

            <div class="gallery-item" data-front="static/images/49.png"
              data-back="static/images/edward_munch.png">
              <div class="flip-card">
                <div class="flip-card-inner flip-card-front"
                  style="background-image: url('static/images/49.png');">
                </div>
                <div class="flip-card-inner flip-card-back" style="background-image: url('static/images/loading.png');">
                </div>

              </div>
              <div class="text-box">painting by Edward Munch.</div>

            </div>

            <div class="gallery-item" data-front="static/images/42.png"
              data-back="static/images/pixel_art_1.png">
              <div class="flip-card">
                <div class="flip-card-inner flip-card-front"
                  style="background-image: url('static/images/42.png');">
                </div>
                <div class="flip-card-inner flip-card-back" style="background-image: url('static/images/loading.png');">
                </div>

              </div>
              <div class="text-box">A pixel art painting, detailed, 8-bit.</div>

            </div>

            <div class="gallery-item" data-front="static/images/2.png"
              data-back="static/images/chess_vangogh.png">
              <div class="flip-card">
                <div class="flip-card-inner flip-card-front"
                  style="background-image: url('static/images/2.png');">
                </div>
                <div class="flip-card-inner flip-card-back" style="background-image: url('static/images/loading.png');">
                </div>

              </div>
              <div class="text-box">Starry night art by Vincent Van-gogh.</div>

            </div>

            <div class="gallery-item" data-front="static/images/18.png"
              data-back="static/images/dadaism.png">
              <div class="flip-card">
                <div class="flip-card-inner flip-card-front"
                  style="background-image: url('static/images/18.png');">
                </div>
                <div class="flip-card-inner flip-card-back" style="background-image: url('static/images/loading.png');">
                </div>

              </div>
              <div class="text-box">Dadaism style art.</div>
            </div>

            <div class="gallery-item" data-front="static/images/bus_input.png"
              data-back="static/images/bus_ours.png">
              <div class="flip-card">
                <div class="flip-card-inner flip-card-front"
                  style="background-image: url('static/images/bus_input.png');">
                </div>
                <div class="flip-card-inner flip-card-back" style="background-image: url('static/images/loading.png');">
                </div>

              </div>
              <div class="text-box">A starry night-style painting, by Van Gogh.</div>

            </div>

            <div class="gallery-item" data-front="static/images/tower.jpg"
              data-back="static/images/tower_BW.png">
              <div class="flip-card">
                <div class="flip-card-inner flip-card-front"
                  style="background-image: url('static/images/tower.jpg');">
                </div>
                <div class="flip-card-inner flip-card-back" style="background-image: url('static/images/loading.png');">
                </div>

              </div>
              <div class="text-box">A B&W line art drawing, bold lines.</div>

            </div>

            <div class="gallery-item" data-front="static/images/78.png"
              data-back="static/images/impressionism_1.png">
              <div class="flip-card">
                <div class="flip-card-inner flip-card-front"
                  style="background-image: url('static/images/78.png');">
                </div>
                <div class="flip-card-inner flip-card-back" style="background-image: url('static/images/loading.png');">
                </div>

              </div>
              <div class="text-box">An impressionism painting, claude monet, vibrant color.</div>

            </div>

            <div class="gallery-item" data-front="static/images/horse.jpg"
              data-back="static/images/horse_emb.png">
              <div class="flip-card">
                <div class="flip-card-inner flip-card-front"
                  style="background-image: url('static/images/horse.jpg');">
                </div>
                <div class="flip-card-inner flip-card-back" style="background-image: url('static/images/loading.png');">
                </div>

              </div>
              <div class="text-box">Embroidery art style, lightly woven</div>

            </div>

            <div class="gallery-item" data-front="static/images/38.png"
              data-back="static/images/traditional_watercolor_1.png">
              <div class="flip-card">
                <div class="flip-card-inner flip-card-front"
                  style="background-image: url('static/images/38.png');">
                </div>
                <div class="flip-card-inner flip-card-back" style="background-image: url('static/images/loading.png');">
                </div>

              </div>
              <div class="text-box">A traditional watercolor painting, colorful.</div>

            </div>
            <br />
          </div>

  </section>




<!-- First Carousel -->
<section class="section"> 
  <div class="container is-max-desktop">
    <div class="columns is-centered">
    </div>
    <div class="carousel" id="carousel1">
      <div class="column is-full-width">
        <h2 class="title is-3">Image driven stylization</h2>
        <div class="carousel-images">
          <img src="static/images/image_driven3.png" alt="Image 1">
          <img src="static/images/image_driven1.png" alt="Image 2">
          <img src="static/images/image_driven2.png" alt="Image 3">
          <img src="static/images/image_driven4.png" alt="Image 4">
        </div>
        <br>
          <span class="dnerf">STAM's</span> image-driven stylization approach. In different visual contents experienced well-structured composition:
          successfully retents the content details while effectively transferring the color palette and texture from the style image.
        <br/>
        <div class="carousel-controls">
          <span class="carousel-control-prev" onclick="moveSlide(-1, 'carousel1')">&#10094;</span>
          <span class="carousel-control-next" onclick="moveSlide(1, 'carousel1')">&#10095;</span>
        </div>
      </div>
    </div>
  </div> 
</section>




          
   <!-- Second Carousel -->
<section class="section"> 
  <div class="container is-max-desktop">
    <div class="columns is-centered">
    </div>
    <div class="carousel" id="carousel2">
      <div class="column is-full-width">
        <h2 class="title is-3">Text-driven style alignment</h2>
        <div class="carousel-images">
          <img src="static/images/ablation_munch.png" alt="Toy Car">
          <img src="static/images/ablation_origami_1.png" alt="Teddy Bear">
          <img src="static/images/starry_night.png" alt="Toy Car">
        </div>
        <br>
            <span class="dnerf">STAM's</span> can also utilize the T2I models for generating images with identical styles. For a given prompt, our approach can direct the given diffusion model 
            to generate images fashioned by the input style prompt.
        <br/>
        <div class="carousel-controls">
          <span class="carousel-control-prev" onclick="moveSlide(-1, 'carousel2')">&#10094;</span>
          <span class="carousel-control-next" onclick="moveSlide(1, 'carousel2')">&#10095;</span>
        </div>
      </div>
    </div>
  </div> 
</section>



  <!-- Second Carousel -->
<section class="section"> 
    <div class="container is-max-desktop">
      <div class="columns is-centered">
      </div>
      <div class="carousel" id="carousel3">
        <div class="column is-full-width">
          <h2 class="title is-3">Style vs Content</h2>
          <div class="carousel-images">
            <img src="static/images/stylevscontent_1.png" alt="Toy Car">
            <img src="static/images/stylevscontent_2.png" alt="Teddy Bear">
          </div>
          <br>
            <span class="dnerf">STAM's</span> performance of content preservation vs stylization compared to other methods. 
          <br/>
          <div class="carousel-controls">
            <span class="carousel-control-prev" onclick="moveSlide(-1, 'carousel3')">&#10094;</span>
            <span class="carousel-control-next" onclick="moveSlide(1, 'carousel3')">&#10095;</span>
          </div>
        </div>
      </div>
    </div> 
  </section>
  



<!-- Javascript code for corousal -->  
<script>
    // Initialize the current index for each carousel
    let currentIndex1 = 0;
    let currentIndex2 = 0;
    let currentIndex3 = 0;
  
    // Function to move the slide for the specific carousel
    function moveSlide(direction, carouselId) {
      const carousel = document.getElementById(carouselId);
      const slides = carousel.querySelector('.carousel-images');
      const totalSlides = slides.children.length;
  
    // Determine which carousel's current index to update
    let currentIndex = carouselId === 'carousel1' ? currentIndex1 :
                       carouselId === 'carousel2' ? currentIndex2 :
                       currentIndex3;
  
      // Update the index with circular behavior
      currentIndex = (currentIndex + direction + totalSlides) % totalSlides;
      const offset = -currentIndex * 100;
      slides.style.transform = `translateX(${offset}%)`;
  
      // Save the updated index
    if (carouselId === 'carousel1') {
      currentIndex1 = currentIndex;
    } else if (carouselId === 'carousel2') {
      currentIndex2 = currentIndex;
    } else {
      currentIndex3 = currentIndex;
    }
  }
  </script>


<footer class="footer">
    <div class="container">
      <div class="content has-text-centered">
        <a class="icon-link" href="https://arxiv.org/abs/2407.15842">
          <i class="fas fa-file-pdf"></i>
        </a>
        <a class="icon-link" href="https://github.com/songrise" class="external-link" disabled>
          <i class="fab fa-github"></i>
        </a>
      </div>
      <div class="columns has-text-centered">
        <div class="column is-8">
          <div class="content">
            <p>
              This website is based on the template from <a href="https://github.com/nerfies/nerfies.github.io">
                Nerfies</a>
            </p>
          </div>
        </div>
      </div>
    </div>
  </footer>


  
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const imagePopup = document.querySelector('.image-popup img');

      imagePopup.addEventListener('mousemove', function (event) {
        const rect = imagePopup.getBoundingClientRect();
        const mouseX = event.clientX - rect.left;
        const mouseY = event.clientY - rect.top;

        // Calculate the transform-origin in percentage
        let xPercent = (mouseX / rect.width) * 100;
        let yPercent = (mouseY / rect.height) * 100;

        // Define the boundaries
        const lowerBoundary = 25; // 1/4 of 100
        const upperBoundary = 75; // 3/4 of 100

        // Map the mouse position to the new range
        if (xPercent < lowerBoundary) {
          xPercent = 0; // Map to 0%
        } else if (xPercent > upperBoundary) {
          xPercent = 100; // Map to 100%
        } else {
          xPercent = ((xPercent - lowerBoundary) / (upperBoundary - lowerBoundary)) * 100;
        }

        if (yPercent < lowerBoundary) {
          yPercent = 0; // Map to 0%
        } else if (yPercent > upperBoundary) {
          yPercent = 100; // Map to 100%
        } else {
          yPercent = ((yPercent - lowerBoundary) / (upperBoundary - lowerBoundary)) * 100;
        }

        // Update CSS variables
        imagePopup.style.setProperty('--x', `${xPercent}%`);
        imagePopup.style.setProperty('--y', `${yPercent}%`);
      });
    });
  </script>

<script>
    const gallery = document.querySelector('.gallery');
    const items = gallery.querySelectorAll('.gallery-item');

    items.forEach(item => {
      item.addEventListener('mouseenter', function () {
        // Add hover-effect class to the gallery
        gallery.classList.add('hover-effect');

        // Replace the placeholder with the actual image
        const frontImage = this.getAttribute('data-front');
        const backImage = this.getAttribute('data-back');
        const frontElement = this.querySelector('.flip-card-front');
        const backElement = this.querySelector('.flip-card-back');

        if (frontElement.style.backgroundImage === 'url("static/images/loading.png")') {
          frontElement.style.backgroundImage = `url(${frontImage})`;
        }
        if (backElement.style.backgroundImage === 'url("static/images/loading.png")') {
          backElement.style.backgroundImage = `url(${backImage})`;
        }
      });

      item.addEventListener('mouseleave', function () {
        // Remove hover-effect class from the gallery
        gallery.classList.remove('hover-effect');
      });
    });
  </script>



</body>
</html
